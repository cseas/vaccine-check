(this["webpackJsonpvaccine-check"]=this["webpackJsonpvaccine-check"]||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(76),i=n.n(a),s=(n(93),n(4)),j=n(136),l=n(131),o=n(138),d=n(33),b=n(141),u=n(61),O=n.n(u),h=n(77),x=n(78),m=n.n(x),f="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin";function p(){return(p=Object(h.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n=g(),e.next=5,m.a.get("".concat(f,"?pincode=").concat(t,"&date=").concat(n)).then((function(e){return e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=new Date,t=e.getDate();t=t<10?"0"+t:t;var n=e.getMonth();return[t,n=(n+=1)<10?"0"+n:n,e.getFullYear()].join("-")}var v=n(143),y=n(144),S=n(142),k=n(135),w=n(2);function z(e){var t=e.slots,n=e.time,c=e.minutes;return 0===t?null:Object(w.jsxs)(l.a,{fontSize:"md",color:"blue.700",padding:"1rem 0 0",children:[t," slots were available here at ",n," that got booked in less than"," ",c," minutes."]})}var C=n.p+"static/media/alert.e1f44fda.mp3",D=n(79);function A(e){var t=e?new Date(e):new Date,n=t.getHours();n=n<10?"0"+n:n;var c=t.getMinutes();return n+":"+(c=c<10?"0"+c:c)}function I(e){var t=e.pincode,n=Object(c.useState)("00:00"),r=Object(s.a)(n,2),a=r[0],i=r[1],j=Object(c.useState)(new Date),l=Object(s.a)(j,2),o=l[0],u=l[1],O=Object(c.useState)(!0),h=Object(s.a)(O,2),x=h[0],m=h[1],f=Object(c.useState)(0),g=Object(s.a)(f,2),I=g[0],F=g[1],M=Object(c.useState)(0),_=Object(s.a)(M,2),P=_[0],W=_[1],E=Object(D.a)(C),T=Object(s.a)(E,2),B=T[0],N=T[1],J=N.isPlaying,L=N.stop;Object(c.useEffect)((function(){W(0)}),[t]);var U=Object(b.a)(["locations",t],(function(){return function(e){return p.apply(this,arguments)}(t)}),{refetchInterval:3e4,refetchIntervalInBackground:!0}),G=U.data,H=U.isLoading,Y=U.isError,q=U.error,K=U.dataUpdatedAt;if(!t)return Object(w.jsx)(w.Fragment,{});if(H)return Object(w.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"2rem 0"},children:Object(w.jsx)(v.a,{isIndeterminate:!0,color:"green.300"})});if(Y)return console.log(q),Object(w.jsxs)(w.Fragment,{children:["Error occurred: ",q.message]});var Q=function(e){var t,n=[],c=Object(d.a)(e);try{for(c.s();!(t=c.n()).done;){var r,a=t.value,i=Object(d.a)(a.sessions);try{for(i.s();!(r=i.n()).done;){var s=r.value;18===s.min_age_limit&&s.available_capacity>0&&n.push({location:a.name,date:s.date,slots:s.available_capacity})}}catch(j){i.e(j)}finally{i.f()}}}catch(j){c.e(j)}finally{c.f()}return n}(G.centers);return 0===Q.length?(x||(m(!0),F(function(e){var t=new Date-e;return Math.floor(t/1e3/60)}(o))),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(y.a,{status:"error",margin:"2rem 0 0",children:[Object(w.jsx)(y.b,{}),"All centres for ",t," are booked at the moment. Updated at"," ",A(K),"."]}),Object(w.jsx)(z,{slots:P,time:a,minutes:I})]})):(x&&(W(function(e){return e.reduce((function(e,t){return e+t.slots}),0)}(Q)),i(A()),u(new Date),m(!1),B()),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(y.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",marginTop:"2rem",padding:"1rem 0",children:[Object(w.jsx)(y.b,{boxSize:"40px",mr:0}),Object(w.jsxs)(y.c,{mt:4,mb:1,fontSize:"lg",children:["Slots available for pincode ",t,"!"]}),J?Object(w.jsx)(S.a,{onClick:function(){return L()},children:"Mute Alarm"}):null]}),Object(w.jsxs)(k.a,{variant:"simple",margin:"2rem 0 0",children:[Object(w.jsx)(k.b,{children:"Go to CoWin website to schedule an appointment"}),Object(w.jsx)(k.f,{children:Object(w.jsxs)(k.g,{children:[Object(w.jsx)(k.e,{children:"Centre"}),Object(w.jsx)(k.e,{children:"Date"}),Object(w.jsx)(k.e,{isNumeric:!0,children:"Slots Left"})]})}),Object(w.jsx)(k.c,{children:Q.map((function(e,t){return Object(w.jsxs)(k.g,{children:[Object(w.jsx)(k.d,{children:e.location}),Object(w.jsx)(k.d,{children:e.date}),Object(w.jsx)(k.d,{isNumeric:!0,children:e.slots})]},t)}))})]})]}))}function F(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(s.a)(a,2),d=i[0],b=i[1],u=Object(c.useState)(null),O=Object(s.a)(u,2),h=O[0],x=O[1];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(j.a,{maxW:"container.sm",children:[Object(w.jsx)(l.a,{fontSize:"3xl",padding:"1rem 0",textAlign:"center",children:"India vaccine centre availability checker"}),Object(w.jsxs)("form",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(w.jsxs)("div",{style:{maxWidth:"10rem"},children:[Object(w.jsx)(l.a,{fontSize:"sm",padding:"0.5rem 0",children:"1st Pincode"}),Object(w.jsxs)(o.c,{onChange:function(e,t){var n;(n=t)>=11e4&&r(n)},precision:0,step:1,min:11e4,max:999999,children:[Object(w.jsx)(o.d,{}),Object(w.jsxs)(o.e,{children:[Object(w.jsx)(o.b,{}),Object(w.jsx)(o.a,{})]})]})]}),Object(w.jsxs)("div",{style:{maxWidth:"10rem"},children:[Object(w.jsx)(l.a,{fontSize:"sm",padding:"0.5rem 0",children:"2nd Pincode"}),Object(w.jsxs)(o.c,{onChange:function(e,t){var n;(n=t)>=11e4&&b(n)},precision:0,step:1,min:11e4,max:999999,children:[Object(w.jsx)(o.d,{}),Object(w.jsxs)(o.e,{children:[Object(w.jsx)(o.b,{}),Object(w.jsx)(o.a,{})]})]})]}),Object(w.jsxs)("div",{style:{maxWidth:"10rem"},children:[Object(w.jsx)(l.a,{fontSize:"sm",padding:"0.5rem 0",children:"3rd Pincode"}),Object(w.jsxs)(o.c,{onChange:function(e,t){var n;(n=t)>=11e4&&x(n)},precision:0,step:1,min:11e4,max:999999,children:[Object(w.jsx)(o.d,{}),Object(w.jsxs)(o.e,{children:[Object(w.jsx)(o.b,{}),Object(w.jsx)(o.a,{})]})]})]})]}),Object(w.jsx)(I,{pincode:n}),Object(w.jsx)(I,{pincode:d}),Object(w.jsx)(I,{pincode:h}),Object(w.jsxs)(l.a,{fontSize:"sm",padding:"2rem 0",children:[Object(w.jsx)("strong",{children:"Note:"})," This utility only checks for vaccination centres for age group 18-44 years. This page will automatically refresh periodically to check the availability of centres for your selected pincodes."]})]}),Object(w.jsxs)(l.a,{fontSize:"sm",textAlign:"center",marginTop:"21rem",padding:"1rem 0",background:"gray.100",children:["Made by"," ",Object(w.jsx)("u",{children:Object(w.jsx)("a",{href:"https://twitter.com/cse_as",rel:"noreferrer",target:"_blank",children:"Abhijeet Singh"})})]})]})}var M=n(139),_=n(80),P=n(137),W=n(140),E=Object(P.a)({styles:{global:{body:{bg:"gray.50"}}}}),T=new M.a;i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(_.a,{client:T,children:Object(w.jsx)(W.a,{theme:E,children:Object(w.jsx)(F,{})})})}),document.getElementById("root"))},93:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.b62df34e.chunk.js.map