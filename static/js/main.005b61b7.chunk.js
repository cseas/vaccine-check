(this["webpackJsonpvaccine-check"]=this["webpackJsonpvaccine-check"]||[]).push([[0],{119:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(76),i=n.n(a),s=(n(93),n(4)),j=n(136),l=n(131),o=n(138),d=n(33),b=n(141),u=n(61),h=n.n(u),O=n(77),x=n(78),m=n.n(x),f="https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin";function p(){return(p=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return n=g(),e.next=5,m.a.get("".concat(f,"?pincode=").concat(t,"&date=").concat(n)).then((function(e){return e.data}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=new Date,t=e.getDate();t=t<10?"0"+t:t;var n=e.getMonth();return[t,n=(n+=1)<10?"0"+n:n,e.getFullYear()].join("-")}var v=n(143),y=n(144),S=n(142),w=n(135),k=n(3);function D(e){var t=e.slots,n=e.time,c=e.minutes;return 0===t?null:Object(k.jsxs)(l.a,{fontSize:"md",color:"blue.700",padding:"1rem 0 0",children:[t," slots were available here at ",n," that got booked in less than"," ",c," minutes."]})}var z=n.p+"static/media/alert.e1f44fda.mp3",C=n(79);function A(e){var t=e?new Date(e):new Date,n=t.getHours();n=n<10?"0"+n:n;var c=t.getMinutes();return n+":"+(c=c<10?"0"+c:c)}function F(e){var t=e.pincode,n=Object(c.useState)("00:00"),r=Object(s.a)(n,2),a=r[0],i=r[1],j=Object(c.useState)(new Date),l=Object(s.a)(j,2),o=l[0],u=l[1],h=Object(c.useState)(!0),O=Object(s.a)(h,2),x=O[0],m=O[1],f=Object(c.useState)(0),g=Object(s.a)(f,2),F=g[0],M=g[1],_=Object(c.useState)(0),I=Object(s.a)(_,2),E=I[0],P=I[1],T=Object(C.a)(z),N=Object(s.a)(T,2),B=N[0],J=N[1],L=J.isPlaying,U=J.stop;Object(c.useEffect)((function(){P(0)}),[t]);var W=Object(b.a)(["locations",t],(function(){return function(e){return p.apply(this,arguments)}(t)}),{refetchInterval:6e4}),G=W.data,H=W.isLoading,Y=W.isError,q=W.error,K=W.dataUpdatedAt;if(!t)return Object(k.jsx)(k.Fragment,{});if(H)return Object(k.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"2rem 0"},children:Object(k.jsx)(v.a,{isIndeterminate:!0,color:"green.300"})});if(Y)return console.log(q),Object(k.jsxs)(k.Fragment,{children:["Error occurred: ",q.message]});var Q=function(e){var t,n=[],c=Object(d.a)(e);try{for(c.s();!(t=c.n()).done;){var r,a=t.value,i=Object(d.a)(a.sessions);try{for(i.s();!(r=i.n()).done;){var s=r.value;18===s.min_age_limit&&s.available_capacity>0&&n.push({location:a.name,date:s.date,slots:s.available_capacity})}}catch(j){i.e(j)}finally{i.f()}}}catch(j){c.e(j)}finally{c.f()}return n}(G.centers);return 0===Q.length?(x||(m(!0),M(function(e){var t=new Date-e;return Math.floor(t/1e3/60)}(o))),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(y.a,{status:"error",margin:"2rem 0 0",children:[Object(k.jsx)(y.b,{}),"All centres for ",t," are booked at the moment. Updated at"," ",A(K),"."]}),Object(k.jsx)(D,{slots:E,time:a,minutes:F})]})):(x&&(P(function(e){return e.reduce((function(e,t){return e+t.slots}),0)}(Q)),i(A()),u(new Date),m(!1),B()),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(y.a,{status:"success",variant:"subtle",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",marginTop:"2rem",padding:"1rem 0",children:[Object(k.jsx)(y.b,{boxSize:"40px",mr:0}),Object(k.jsxs)(y.c,{mt:4,mb:1,fontSize:"lg",children:["Slots available for pincode ",t,"!"]}),L?Object(k.jsx)(S.a,{onClick:function(){return U()},children:"Mute Alarm"}):null]}),Object(k.jsxs)(w.a,{variant:"simple",margin:"2rem 0 0",children:[Object(k.jsx)(w.b,{children:"Go to CoWin website to schedule an appointment"}),Object(k.jsx)(w.f,{children:Object(k.jsxs)(w.g,{children:[Object(k.jsx)(w.e,{children:"Centre"}),Object(k.jsx)(w.e,{children:"Date"}),Object(k.jsx)(w.e,{isNumeric:!0,children:"Slots Left"})]})}),Object(k.jsx)(w.c,{children:Q.map((function(e,t){return Object(k.jsxs)(w.g,{children:[Object(k.jsx)(w.d,{children:e.location}),Object(k.jsx)(w.d,{children:e.date}),Object(k.jsx)(w.d,{isNumeric:!0,children:e.slots})]},t)}))})]})]}))}function M(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),i=Object(s.a)(a,2),d=i[0],b=i[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(j.a,{maxW:"container.sm",children:[Object(k.jsx)(l.a,{fontSize:"3xl",padding:"1rem 0",textAlign:"center",children:"India vaccine centre availability checker"}),Object(k.jsxs)("form",{style:{display:"flex",justifyContent:"space-evenly"},children:[Object(k.jsxs)("div",{children:[Object(k.jsx)(l.a,{fontSize:"sm",padding:"0.5rem 0",children:"First Pincode"}),Object(k.jsxs)(o.c,{onChange:function(e,t){var n;(n=t)>=11e4&&r(n)},precision:0,step:1,min:11e4,max:999999,children:[Object(k.jsx)(o.d,{}),Object(k.jsxs)(o.e,{children:[Object(k.jsx)(o.b,{}),Object(k.jsx)(o.a,{})]})]})]}),Object(k.jsxs)("div",{children:[Object(k.jsx)(l.a,{fontSize:"sm",padding:"0.5rem 0",children:"Second Pincode"}),Object(k.jsxs)(o.c,{onChange:function(e,t){var n;(n=t)>=11e4&&b(n)},precision:0,step:1,min:11e4,max:999999,children:[Object(k.jsx)(o.d,{}),Object(k.jsxs)(o.e,{children:[Object(k.jsx)(o.b,{}),Object(k.jsx)(o.a,{})]})]})]})]}),Object(k.jsx)(F,{pincode:n}),Object(k.jsx)(F,{pincode:d}),Object(k.jsxs)(l.a,{fontSize:"sm",padding:"2rem 0",children:[Object(k.jsx)("strong",{children:"Note:"})," This utility only checks for vaccination centres for age group 18-44 years. This page will automatically refresh periodically to check the availability of centres for your selected pincodes."]})]}),Object(k.jsxs)(l.a,{fontSize:"sm",textAlign:"center",marginTop:"21rem",padding:"1rem 0",background:"gray.100",children:["Made by"," ",Object(k.jsx)("u",{children:Object(k.jsx)("a",{href:"https://twitter.com/cse_as",rel:"noreferrer",target:"_blank",children:"Abhijeet Singh"})})]})]})}var _=n(139),I=n(80),E=n(137),P=n(140),T=Object(E.a)({styles:{global:{body:{bg:"gray.50"}}}}),N=new _.a;i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(I.a,{client:N,children:Object(k.jsx)(P.a,{theme:T,children:Object(k.jsx)(M,{})})})}),document.getElementById("root"))},93:function(e,t,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.005b61b7.chunk.js.map